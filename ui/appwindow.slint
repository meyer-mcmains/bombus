import { ScrollView } from "std-widgets.slint";
import { Grid } from "global.slint";
import { Cover } from "cover.slint";

export component AppWindow inherits Window {
    min-width: Grid.outer-width;
    min-height: Grid.outer-height;
    in property <[color]> albums;
    ScrollView {
        in-out property <int> items_per_row: Math.floor(parent.width / Grid.outer-width);
        in-out property <int> rows: Math.ceil(albums.length / items-per-row);
        // caculate the remaining width so we can manually center the items
        in-out property <length> offset-x: (parent.width - (Grid.outer-width * items-per-row)) / 2;
        height: parent.height;
        width: parent.width;
        viewport-height: Grid.outer-height * rows;
        // loop over albums creating the grid
        for album [index] in albums: Rectangle {
            x: mod(index, items-per-row) * Grid.outer-width + offset-x;
            y: Math.floor(index / items-per-row) * Grid.outer-height;
            height: Grid.outer-height;
            width: Grid.outer-width;
            Cover {
                bg-color: albums[index];
            }
        }
    }
}
